# go项目工程实践 #

go项目工程实践感觉没有唯一标准,很多种实践方式,看你具体定义,我的工程实践定义如下:

## 项目布局 ##

- 服务布局

该项目布局是在一个项目里放多个微服务demo,demo2;你也可以建立多个项目,每个项目里一个app;

多app的方式,app目录内的每个微服务按照自己的全局唯一名称建立目录.
如:demo/api/*;

pkg用于存放业务有关的公共库(非基础框架库);

- 服务内部布局

微服务种的app里服务分为4类:

1. interface: 对外的网关服务,接收用户请求,比如暴露http接口
2. service: 对内的微服务,仅接受内部其他服务或网关请求,比如暴露gRPC接口;
3. admin: 区别于service,更多是面向运营测的服务,通常数据权限更高;
4. job: 定时任务或流式任务处理的服务;
5. ecode: 属于这一个单一业务里可以共享的错误码,也可以有类似pkg公共库;

其中service的内部目录分为:

1. api: 放置api定义,以及对应的生成的client代码,基于pb生成的swagger.json
2. cmd: 服务入口main函数
3. configs: 服务配置文件
4. internal: 定义内部model,dao,server,service

其中internal的目录分为:

1. model: 放对应的"存储层"的结构体,是对存储的一一映射;
2. dao: 数据读写层,数据库和缓存全部在这层统一处理;
3. service: 组合各种数据访问来构建业务逻辑;
4. server: 依赖pb定义的服务作为入参,提供快捷的启动服务全局方法;